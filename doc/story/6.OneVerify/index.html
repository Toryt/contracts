<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>One Verify</title>
  <link href="../../lib/prism/prism.css" rel="stylesheet"/>
  <link href="../story.css" rel="stylesheet"/>
</head>
<body>

<div class="navigate prev"><a href="../5.FunctionIsAnObject/index.html">Previous</a></div>

<p>Duh! That's interesting. In the previous code, the 2 general validating functions are
  exactly the same!</p>
<p>In this version, these 2 functions are replaced by one function,
  <a href="#code.1-14"><code class="language-javascript">verify(conditions, â€¦)</code></a>.</p>
<p>At the same time, this is a first attempt to get rid of the remaining ad hoc code in this function.
  In general, we want the first parameter to be the set of conditions to check.
  The other parameters should be the actual values of the parameters of the actual
  <a href="#code.16-37">subject function</a>, extended with the actual
  <a href="#code.16-37">subject function</a> <code class="language-javascript">result</code>
  for postconditions.</p>

<pre id="code" class="line-numbers" data-src="code.js" data-line="1-14,16-37"></pre>

<p>We don't succeed completely yet, though. For reporting the actual values that violated a condition,
  we still refer explicitly to the parameters in question, in this case
  <code class="language-javascript">n</code>.</p>

<p>This is a true refactor. Nothing is changed to the contract definition. Nothing changes in the output of
  <code class="language-javascript">fibonacci(&quot;a&quot;)</code>:</p>

<div id="prism-eval-output-fibonacciWithA"></div>

<p>And nothing changes in the output of the of <code class="language-javascript">fibonacci</code>
  with the integers from -1 to 9:</p>

<div id="prism-eval-output-fibonacciWithI"></div>

<div class="navigate next"><a href="../7.FunctionIsAnObject_Reprise/index.html">Next</a></div>

<div id="prism-eval-output"></div> <!-- not used -->


<script src="../../lib/prism/prism.js"></script>
<script src="code.js"></script>
<script src="../fibonacciContract.js"></script>
<script src="../execFibonacci.js"></script>

</body>
</html>
